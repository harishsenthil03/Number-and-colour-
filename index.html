<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced AI Color & Number Predictor</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:Arial;background:#f2f2f2;padding:12px}
.card{background:#fff;padding:12px;margin-bottom:12px;border-radius:8px}
.badge{padding:5px 9px;border-radius:6px;color:#fff;margin:2px;display:inline-block}
.red{background:#e3342f}
.green{background:#16a34a}
.win{color:green;font-weight:bold}
.loss{color:red;font-weight:bold}
table{width:100%;border-collapse:collapse;font-size:12px}
th,td{border:1px solid #ccc;padding:5px;text-align:center}
th{background:#eee}
</style>
</head>
<body>

<h3>ðŸ§  Advanced AI Color & Number Predictor</h3>

<div class="card">
Start Serial <input id="startSerial" type="number" value="1">
<button onclick="setSerial()">Set</button>
</div>

<div class="card">
<b>AI Color:</b> <span id="aiColor">-</span><br>
<b>AI Number:</b> <span id="aiNumber">-</span><br>
<b>Confidence:</b> <span id="aiConf">-</span><br>
<b>Why?</b> <div id="aiExplain"></div>
</div>

<div class="card">
<h4>Enter Result</h4>
<button onclick="submit('Red')">Red</button>
<button onclick="submit('Green')">Green</button>
<select id="num">
<option>0</option><option>1</option><option>2</option><option>3</option>
<option>4</option><option>5</option><option>6</option><option>7</option>
<option>8</option><option>9</option>
</select>
</div>

<div class="card">
<h4>ðŸ“ˆ Live Accuracy Trend</h4>
<canvas id="accChart"></canvas>
</div>

<div class="card">
<h4>ðŸ“œ History</h4>
<table>
<thead>
<tr>
<th>S</th><th>AI C</th><th>R C</th><th>C</th>
<th>AI N</th><th>R N</th><th>N</th>
</tr>
</thead>
<tbody id="history"></tbody>
</table>
</div>

<script>
let history=[], serial=1, accData=[];
let results=[];

function predict(){
 let colors=results.slice(-20);
 let red=colors.filter(x=>x.color==="Red").length;
 let green=colors.length-red;

 let score=50, explain=[];

 if(red>green+3){score+=15; explain.push("Green overdue")}
 if(green>red+3){score+=15; explain.push("Red overdue")}

 let last5=colors.slice(-5);
 let r5=last5.filter(x=>x.color==="Red").length;
 let g5=last5.length-r5;
 if(r5>=4){score+=10; explain.push("Red streak exhaustion")}
 if(g5>=4){score+=10; explain.push("Green streak exhaustion")}

 let color = score>=55 ? (red>green?"Green":"Red") : (Math.random()>0.5?"Red":"Green");
 let conf = score>=70?"HIGH":score>=45?"MEDIUM":"LOW";

 let numFreq=Array(10).fill(0);
 results.forEach(x=>numFreq[x.num]++);
 let num=numFreq.indexOf(Math.min(...numFreq));

 document.getElementById("aiColor").innerText=color;
 document.getElementById("aiNumber").innerText=num;
 document.getElementById("aiConf").innerText=conf;
 document.getElementById("aiExplain").innerHTML=explain.join(", ")||"Neutral data";

 return {color,num};
}

function submit(color){
 let num=Number(document.getElementById("num").value);
 let ai=predict();

 let cWin=ai.color===color;
 let nWin=ai.num===num;

 accData.push(cWin?1:0);
 if(accData.length>20) accData.shift();
 updateChart();

 results.push({color,num});

 history.unshift(`
 <tr>
 <td>${serial++}</td>
 <td>${ai.color}</td>
 <td>${color}</td>
 <td class="${cWin?"win":"loss"}">${cWin?"W":"L"}</td>
 <td>${ai.num}</td>
 <td>${num}</td>
 <td class="${nWin?"win":"loss"}">${nWin?"W":"L"}</td>
 </tr>`);

 document.getElementById("history").innerHTML=history.join("");
 predict();
}

function setSerial(){serial=Number(document.getElementById("startSerial").value)||1;}

let ctx=document.getElementById("accChart");
let chart=new Chart(ctx,{
 type:"line",
 data:{labels:[],datasets:[{label:"Accuracy",data:[],borderWidth:2}]},
 options:{scales:{y:{min:0,max:1}}}
});

function updateChart(){
 chart.data.labels=accData.map((_,i)=>i+1);
 chart.data.datasets[0].data=accData;
 chart.update();
}

predict();
</script>
</body>
</html>